spi:
  id: display_spi
  clk_pin: GPIO20
  mosi_pin: GPIO21
  miso_pin: GPIO13    # Not in use -- shouldn't need to define this?

time:
  - platform: homeassistant
    id: realtime
    on_time_sync: 
      then:
        - component.update: epaper

display:
  - platform: waveshare_epaper 
    id: epaper
    spi_id: display_spi
    model: "2.13inv3"
    reset_pin: GPIO15
    cs_pin: GPIO19
    dc_pin: GPIO18
    busy_pin: GPIO14
    rotation: 270
    full_update_every: 60
    update_interval: 5min
    lambda: |-
      it.strftime(0, 0, id(fira_b32), "%H:%M", id(realtime).now());
      it.strftime(80, 0, id(fira_b32), "%a %d %b", id(realtime).now());
      it.printf(0, 36, id(fira_24), "%.1f%s", id(temperature).state, id(temperature).get_unit_of_measurement().c_str());
      it.printf(85, 36, id(fira_24), "%.0f%sH", id(humidity).state, id(humidity).get_unit_of_measurement().c_str());
      it.printf(85+80, 36, id(fira_24), "%.0f %s", id(pressure).state, id(pressure).get_unit_of_measurement().c_str());
      it.printf(0, 36+24, id(fira_24), "CO\u2082 %.0f %s", id(eco2).state, id(eco2).get_unit_of_measurement().c_str());
      it.printf(0, 36+24+24, id(fira_24), "TVOC %.0f %s", id(tvoc).state, id(tvoc).get_unit_of_measurement().c_str());

font:
  - file: 'gfonts://Fira Sans Condensed'
    size: 24
    id: fira_24
    glyphsets: GF_Latin_Kernel
    glyphs: ["\u2082"]   # subscript 2 for CO₂
  - file: 'gfonts://Fira Sans Condensed@600'
    size: 32
    id: fira_b32
    glyphsets: GF_Latin_Kernel
    glyphs: ["\u2082"]   # subscript 2 for CO₂
